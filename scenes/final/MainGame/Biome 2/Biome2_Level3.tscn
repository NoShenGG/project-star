[gd_scene load_steps=15 format=3 uid="uid://cllo2m2p8svjf"]

[ext_resource type="Script" uid="uid://cs72ukacrgd4g" path="res://scripts/utility/wave_manager.gd" id="1_d2yy8"]
[ext_resource type="Script" uid="uid://dr7x5nckg7bcr" path="res://scripts/utility/wave.gd" id="2_aha3a"]
[ext_resource type="PackedScene" uid="uid://dikwtund4a5xs" path="res://scenes/sub/DynaMite.tscn" id="5_6kimk"]
[ext_resource type="PackedScene" uid="uid://bo8i2glbe0u23" path="res://scenes/sub/fortifier.tscn" id="6_31ltn"]
[ext_resource type="PackedScene" uid="uid://c1ujvuwjyhhn" path="res://scenes/tool/spawn_area.tscn" id="6_d2yy8"]
[ext_resource type="PackedScene" uid="uid://brmdsiu0kp6ca" path="res://scenes/final/player_manager.tscn" id="6_prq4x"]
[ext_resource type="PackedScene" uid="uid://cuq57gnl0xn2m" path="res://scenes/sub/LaserShroom.tscn" id="7_r2uke"]
[ext_resource type="PackedScene" uid="uid://4k1on6ftdobj" path="res://scenes/final/MainGame/Prefabs/LevelEnder.tscn" id="7_s0x1b"]
[ext_resource type="PackedScene" uid="uid://cw87q52v3jxf0" path="res://scenes/sub/RangedEnemy.tscn" id="8_prq4x"]

[sub_resource type="NavigationMesh" id="NavigationMesh_31ltn"]
vertices = PackedVector3Array(-2.1410847, 0.3901062, -26.381245, -2.1410847, 0.3901062, -22.881245, -0.6410847, 0.3901062, -22.131245, 1.1089153, 0.3901062, -26.631245, 0.10891533, 0.3901062, -21.381245, 8.608915, 0.3901062, -21.631245, 10.108915, 0.3901062, -22.131245, 10.108915, 0.3901062, -26.381245, 5.3589153, 0.3901062, -26.381245, 0.10891533, 0.3901062, -20.631245, 8.358915, 0.3901062, -20.381245, 5.1089153, 2.8901062, -34.131245, 1.1089153, 2.8901062, -34.131245, -15.141085, 0.3901062, -15.631245, -8.641085, 0.3901062, -15.631245, -6.8910847, 0.3901062, -18.131245, -15.141085, 0.3901062, -26.381245, 11.608915, 0.3901062, -21.881245, 12.108915, 0.3901062, -20.131245, 15.358915, 0.3901062, -20.131245, 15.358915, 0.3901062, -26.381245, -1.1410847, 5.890106, -20.631245, -1.1410847, 5.890106, -21.131245, -2.1410847, 5.890106, -21.631245, -7.6410847, 5.890106, -15.631245, -6.6410847, 5.890106, -14.631245, 9.358915, 32.890106, -20.381245, 10.108915, 32.890106, -19.131245, 11.108915, 32.890106, -19.881245, 10.358915, 32.890106, -21.131245, 9.608915, 0.3901062, -1.6312447, 9.858915, 0.3901062, -1.1312447, 12.108915, 0.3901062, -0.63124466, 15.358915, 0.3901062, -6.1312447, -7.3910847, 0.3901062, -6.1312447, -4.8910847, 0.3901062, -6.1312447, -4.6410847, 0.3901062, -6.8812447, -7.6410847, 0.3901062, -7.8812447, 9.608915, 0.3901062, -18.131245, 8.608915, 0.3901062, -18.881245, -1.6410847, 0.3901062, 3.8687553, 1.6089153, 0.3901062, 4.1187553, 1.8589153, 0.3901062, 2.3687553, 11.358915, 0.3901062, -18.381245, -1.6410847, 0.3901062, -6.6312447, -5.6410847, 0.3901062, -13.881245, -6.8910847, 0.3901062, -13.381245, 6.8589153, 0.3901062, -1.6312447, 6.8589153, 0.3901062, 2.3687553, -15.141085, 0.3901062, -6.8812447, -11.141085, 0.3901062, -6.8812447, -10.891085, 0.3901062, -7.8812447, -8.391085, 0.3901062, -8.631245, -9.891085, 0.3901062, -8.631245, -8.641085, 0.3901062, -14.881245, -10.141085, 32.890106, -6.8812447, -9.641085, 32.890106, -5.8812447, -8.391085, 32.890106, -6.1312447, -8.891085, 32.890106, -7.6312447, -10.891085, 0.3901062, -5.3812447, -9.391085, 0.3901062, -4.6312447, -15.141085, 0.3901062, 2.3687553, -9.391085, 0.3901062, 2.3687553, 7.8589153, 4.140106, 3.1187553, 8.858915, 4.140106, 3.8687553, 10.858915, 4.140106, 4.1187553, 12.608915, 4.140106, 0.36875534, 7.6089153, 4.140106, -0.63124466, 13.608915, 4.140106, 5.8687553, 19.858915, 4.140106, -4.6312447, 16.608915, 4.140106, -6.6312447, -8.141085, 0.3901062, -4.8812447, -4.8910847, 0.3901062, 2.3687553, -3.8910847, 5.890106, -5.8812447, -3.8910847, 5.890106, 2.3687553, -2.6410847, 5.890106, 2.3687553, -2.6410847, 5.890106, -5.8812447, -1.6410847, 0.3901062, 12.118755, 1.6089153, 0.3901062, 12.118755)
polygons = [PackedInt32Array(0, 2, 1), PackedInt32Array(2, 0, 4), PackedInt32Array(4, 0, 3), PackedInt32Array(6, 5, 7), PackedInt32Array(7, 5, 8), PackedInt32Array(4, 3, 9), PackedInt32Array(9, 3, 8), PackedInt32Array(9, 8, 5), PackedInt32Array(9, 5, 10), PackedInt32Array(12, 11, 3), PackedInt32Array(3, 11, 8), PackedInt32Array(15, 14, 13), PackedInt32Array(1, 15, 0), PackedInt32Array(0, 15, 16), PackedInt32Array(16, 15, 13), PackedInt32Array(17, 19, 18), PackedInt32Array(17, 6, 7), PackedInt32Array(7, 20, 17), PackedInt32Array(17, 20, 19), PackedInt32Array(22, 21, 23), PackedInt32Array(23, 21, 24), PackedInt32Array(24, 21, 25), PackedInt32Array(29, 28, 26), PackedInt32Array(26, 28, 27), PackedInt32Array(31, 30, 32), PackedInt32Array(32, 30, 33), PackedInt32Array(35, 34, 36), PackedInt32Array(36, 34, 37), PackedInt32Array(9, 39, 38), PackedInt32Array(42, 41, 40), PackedInt32Array(18, 19, 43), PackedInt32Array(43, 19, 33), PackedInt32Array(36, 37, 44), PackedInt32Array(44, 37, 46), PackedInt32Array(44, 46, 45), PackedInt32Array(45, 9, 44), PackedInt32Array(44, 9, 38), PackedInt32Array(44, 38, 47), PackedInt32Array(47, 38, 33), PackedInt32Array(47, 48, 42), PackedInt32Array(42, 40, 47), PackedInt32Array(47, 40, 44), PackedInt32Array(38, 43, 33), PackedInt32Array(9, 10, 39), PackedInt32Array(30, 47, 33), PackedInt32Array(49, 51, 50), PackedInt32Array(52, 46, 37), PackedInt32Array(51, 49, 53), PackedInt32Array(53, 49, 54), PackedInt32Array(54, 49, 14), PackedInt32Array(14, 49, 13), PackedInt32Array(52, 53, 46), PackedInt32Array(46, 53, 54), PackedInt32Array(56, 55, 57), PackedInt32Array(57, 55, 58), PackedInt32Array(49, 50, 59), PackedInt32Array(59, 60, 49), PackedInt32Array(49, 60, 62), PackedInt32Array(49, 62, 61), PackedInt32Array(64, 63, 65), PackedInt32Array(65, 63, 67), PackedInt32Array(65, 67, 66), PackedInt32Array(65, 66, 68), PackedInt32Array(68, 66, 70), PackedInt32Array(68, 70, 69), PackedInt32Array(34, 35, 71), PackedInt32Array(71, 35, 72), PackedInt32Array(71, 72, 62), PackedInt32Array(60, 71, 62), PackedInt32Array(76, 75, 73), PackedInt32Array(73, 75, 74), PackedInt32Array(78, 77, 41), PackedInt32Array(41, 77, 40)]

[sub_resource type="BoxShape3D" id="BoxShape3D_r2uke"]
size = Vector3(15, 3, 15)

[sub_resource type="ProceduralSkyMaterial" id="ProceduralSkyMaterial_6kimk"]
sky_top_color = Color(0.7868003, 0.8044158, 0.90088457, 1)
sky_horizon_color = Color(0.59996814, 0.48462427, 0.7608906, 1)
ground_bottom_color = Color(0.17863777, 0.14902645, 0.28510144, 1)
ground_horizon_color = Color(0.6767592, 0.58873963, 0.93670535, 1)

[sub_resource type="Sky" id="Sky_wel6h"]
sky_material = SubResource("ProceduralSkyMaterial_6kimk")

[sub_resource type="Environment" id="Environment_31ltn"]
background_mode = 2
background_color = Color(1, 1, 1, 1)
background_energy_multiplier = 1.17
sky = SubResource("Sky_wel6h")
ambient_light_source = 2
ambient_light_color = Color(0.69779664, 0.45408309, 0.652757, 1)
ambient_light_energy = 1.13
tonemap_mode = 2
tonemap_exposure = 0.5
ssao_enabled = true
ssil_enabled = true
volumetric_fog_density = 0.02
volumetric_fog_detail_spread = 0.5
adjustment_enabled = true
adjustment_brightness = 1.17
adjustment_contrast = 1.24
adjustment_saturation = 0.9

[node name="Level3" type="Node3D"]

[node name="PlayerManager" parent="." instance=ExtResource("6_prq4x")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.04858756, 0, 3.947483)

[node name="LevelEnder" parent="." instance=ExtResource("7_s0x1b")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 3.2077312, 2.3391743, -35.17933)
next_level = "MainGame/Biome 3/Biome3_Level1"

[node name="NavigationRegion3D" type="NavigationRegion3D" parent="."]
transform = Transform3D(0.995262, 0, 0, 0, 0.995262, 0, 0, 0, 0.995262, 0.009864807, 0.053094864, -0.11214638)
navigation_mesh = SubResource("NavigationMesh_31ltn")

[node name="CSGCombiner3D" type="CSGCombiner3D" parent="NavigationRegion3D"]
use_collision = true

[node name="CSGBox3D" type="CSGBox3D" parent="NavigationRegion3D/CSGCombiner3D"]
transform = Transform3D(0.41160744, 0, 0, 0, 1.0000002, 0, 0, 0, 0.38908812, 0, -0.5000001, -11.935992)
size = Vector3(76, 1, 76)

[node name="CSGBox3D2" type="CSGBox3D" parent="NavigationRegion3D/CSGCombiner3D"]
transform = Transform3D(0.055296805, 0, 0, 0, 1.0000001, 0, 0, 0, 0.17136255, 0, -0.50000006, 6.03839)
size = Vector3(76, 1, 76)

[node name="CSGBox3D4" type="CSGBox3D" parent="NavigationRegion3D/CSGCombiner3D"]
transform = Transform3D(-3.9220867e-09, 2.0000024, 0, -0.08972688, -8.742291e-08, 0, 0, 0, 0.11995396, -3.1542974, 2.0153434, -1.7067436)
size = Vector3(76, 1, 76)

[node name="CSGBox3D6" type="CSGBox3D" parent="NavigationRegion3D/CSGCombiner3D"]
transform = Transform3D(-2.9253726e-09, 1.491745, -0.079900146, -0.0897269, -8.7422926e-08, 0, -2.6124627e-09, 1.3321819, 0.08947025, -4.3470674, 2.015344, -18.141605)
size = Vector3(76, 1, 76)

[node name="CSGBox3D5" type="CSGBox3D" parent="NavigationRegion3D/CSGCombiner3D"]
transform = Transform3D(-3.3971748e-09, 1.9971929, 0.0030840524, -0.08972692, -7.330077e-08, -1.3861804e-09, -1.9600956e-09, -0.10599661, 0.05810975, 8.348864, 0.27723435, 1.2053851)
size = Vector3(76, 1, 76)

[node name="CSGBox3D7" type="CSGBox3D" parent="NavigationRegion3D/CSGCombiner3D"]
transform = Transform3D(1.0108122e-09, -1.2204436, -0.056225818, -0.08972693, -2.069946e-07, -1.176609e-16, -3.7895953e-09, 4.5755134, -0.014997311, 10.673438, 0.27723438, 2.179122)
size = Vector3(76, 1, 76)

[node name="CSGBox3D8" type="CSGBox3D" parent="NavigationRegion3D/CSGCombiner3D"]
transform = Transform3D(-3.3731533e-09, 3.7514436, -0.08744934, -0.08932546, -1.8981332e-07, -2.6302303e-16, -1.966534e-09, 2.1870754, 0.15, 15.170864, 0.27723446, -0.38080198)
size = Vector3(76, 1, 76)

[node name="CSGBox3D3" type="CSGBox3D" parent="NavigationRegion3D/CSGCombiner3D"]
transform = Transform3D(0.061672263, 0, 0, 0, 0.950065, -0.05347422, 0, 0.3120532, 0.16280557, 3.1341276, 0.09485218, -28.538605)
size = Vector3(76, 1, 76)

[node name="CSGCylinder3D" type="CSGCylinder3D" parent="NavigationRegion3D/CSGCombiner3D"]
transform = Transform3D(2.5522811, 0, 0, 0, 32.60989, 0, 0, 0, 2.7371018, 10.224735, 0, -20.178616)

[node name="CSGCylinder3D2" type="CSGCylinder3D" parent="NavigationRegion3D/CSGCombiner3D"]
transform = Transform3D(2.5522819, 0, 0, 0, 32.60989, 0, 0, 0, 2.7371025, -9.188436, 0, -6.7044153)

[node name="WaveManager" type="Node3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 24, 0, -48)
script = ExtResource("1_d2yy8")
metadata/_custom_type_script = "uid://cs72ukacrgd4g"

[node name="Wave1" type="Node3D" parent="WaveManager" node_paths=PackedStringArray("spawn_areas")]
script = ExtResource("2_aha3a")
enemies = Array[PackedScene]([ExtResource("5_6kimk"), ExtResource("5_6kimk"), ExtResource("5_6kimk"), ExtResource("5_6kimk"), ExtResource("6_31ltn"), ExtResource("8_prq4x"), ExtResource("8_prq4x"), ExtResource("8_prq4x"), ExtResource("8_prq4x"), ExtResource("7_r2uke")])
spawn_areas = [NodePath("../SpawnArea1"), NodePath("../SpawnArea2"), NodePath("../SpawnArea3"), NodePath("../SpawnArea4"), NodePath("../SpawnArea5")]
setSpawnAreas = true
spawnAreaIndices = Array[int]([4, 4, 2, 2, 1, 0, 0, 0, 0, 3])
metadata/_custom_type_script = "uid://dr7x5nckg7bcr"

[node name="Wave_Starter" type="Area3D" parent="WaveManager"]
transform = Transform3D(0.5, 0, 0, 0, 0.5, 0, 0, 0, 0.5, -24.182987, 0, 54.882103)
collision_layer = 0
collision_mask = 2

[node name="CollisionShape3D" type="CollisionShape3D" parent="WaveManager/Wave_Starter"]
shape = SubResource("BoxShape3D_r2uke")
debug_color = Color(0, 7.095753, 8.250874, 1)

[node name="SpawnArea1" parent="WaveManager" instance=ExtResource("6_d2yy8")]
transform = Transform3D(8.309688, 0, 0, 0, 1, 0, 0, 0, 10, -22.42935, -1.9073486e-06, 30.670176)

[node name="SpawnArea2" parent="WaveManager" instance=ExtResource("6_d2yy8")]
transform = Transform3D(2.765296, 0, 0, 0, 1, 0, 0, 0, 2.8338914, -15.030594, -1.9073486e-06, 23.624691)

[node name="SpawnArea3" parent="WaveManager" instance=ExtResource("6_d2yy8")]
transform = Transform3D(3.4254735, 0, 0, 0, 1, 0, 0, 0, 3.6188767, -14.261655, -1.9073486e-06, 41.06053)

[node name="SpawnArea4" parent="WaveManager" instance=ExtResource("6_d2yy8")]
transform = Transform3D(4.9094515, 0, 0, 0, 1, 0, 0, 0, 2.4655247, -34.92141, 1.9073486e-06, 25.780798)

[node name="SpawnArea5" parent="WaveManager" instance=ExtResource("6_d2yy8")]
transform = Transform3D(3.4254735, 0, 0, 0, 1, 0, 0, 0, 3.6188767, -35.066307, -1.9073486e-06, 46.32631)

[node name="DirectionalLight3D2" type="DirectionalLight3D" parent="."]
transform = Transform3D(-0.5219336, -0.61917514, 0.58669204, 0.061710697, 0.65859747, 0.74996084, -0.850751, 0.42763487, -0.3055344, 0, 22.456, 0)
shadow_enabled = true
sky_mode = 1

[node name="WorldEnvironment" type="WorldEnvironment" parent="DirectionalLight3D2"]
environment = SubResource("Environment_31ltn")

[connection signal="body_entered" from="WaveManager/Wave_Starter" to="WaveManager" method="_on_start" unbinds=1]
